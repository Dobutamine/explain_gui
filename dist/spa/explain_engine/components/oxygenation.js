brentAccuracy=1e-8,maxIterations=100,lefto2=0,righto2=1e3,alpha_o2p=.0095,mmoltoml=22.2674,to2=0,so2=0,co2p=0,po2=0,ph_odc=7.4,be_odc=0,temp_odc=37,dpg_odc=5,calcOxygenationFromTO2=function(o,t){to2=o.to2,ph_odc=Math.abs(o.ph)>0?o.ph:7.4,be_odc=Math.abs(o.be)>0?o.be:0,temp_odc=t.components.metabolism["body_temp"],hb_odc=o["hemoglobin"],result=brent(Dto2,lefto2,righto2,brentAccuracy,maxIterations),result.error?console.log("error in oxy calcuations"):(calcOxygenation(to2,result.result),po2=7.50061683*result.result,o.po2=po2,o.co2p=co2p,o.so2=so2)},calcOxygenation=function(o,t){co2p=t*alpha_o2p,so2=Odc(t)},Odc=function(o){let t=1.04*(7.4-ph_odc)+.005*be_odc+.07*(dpg_odc-5),e=.055*(temp_odc+273.15-310.15),c=1.875,a=1.875+t+e,n=3.5+t,r=.5343,p=Math.log(o,Math.E),l=p-a+n*Math.tanh(r*(p-a))+c;return 1/(Math.pow(Math.E,-l)+1)},Dto2=function(o){return so2=Odc(o),to2_new_estimate=10*(.02325*o+hb_odc/.6206*1.36*so2),dto2=to2-to2_new_estimate/mmoltoml,dto2};